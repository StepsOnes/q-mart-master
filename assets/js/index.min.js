const menuItems=Array.from(document.querySelectorAll(".menu-item"));function showMenu(){let e=document.getElementById("menu");document.getElementById("menu-btn").classList.toggle("active"),e.classList.toggle("visible"),window.innerWidth<=1200&&document.body.classList.toggle("lock")}function hideMenu(){document.getElementById("menu").classList.remove("visible"),document.getElementById("menu-btn").classList.remove("active"),document.body.classList.remove("lock")}function spawnAnimation(){let e=Array.from(document.querySelectorAll(".step-card")),o=0,t=setInterval(()=>{e[o].classList.add("visible"),++o>=e.length&&clearInterval(t)},1200)}function onScroll(){let e=document.getElementById("company-steps"),o=e.getBoundingClientRect().top;o+e.clientHeight<=window.innerHeight&&o>=0&&(spawnAnimation(),document.removeEventListener("scroll",onScroll))}function inputMask(){let e=document.getElementById("footer_phone"),o=document.getElementById("popup_phone-01"),t=document.getElementById("popup_phone-02"),l=document.getElementById("popup_phone-03"),r=document.getElementById("popup_phone-04"),p={mask:"+{7} (000) 000-00-00"};IMask(e,p),IMask(o,p),IMask(t,p),IMask(l,p),IMask(r,p)}document.getElementById("menu-btn").addEventListener("click",showMenu),document.addEventListener("scroll",onScroll),menuItems.forEach(e=>{e.addEventListener("click",hideMenu)});const gridElement=document.querySelector(".grid");let msnry=new Masonry(gridElement,{itemSelector:".grid-item",columnWidth:20,gutter:40,percentPosition:!0});inputMask();const closeForm=e=>{event.target.closest(".popup-form").classList.add("not-visible"),document.getElementById(e).classList.add("visible")},clearValues=()=>{document.querySelectorAll(".popup-inp").forEach(e=>e.value="")},ERROR_ClASS="error-inp",popUpInputs=Array.from(document.querySelectorAll(".popup-inp")),footerInputs=Array.from(document.querySelectorAll(".footer-inp"));popUpInputs.forEach(e=>{e.onfocus=()=>{e.classList.remove(ERROR_ClASS)}}),footerInputs.forEach(e=>{e.onfocus=()=>{e.classList.remove(ERROR_ClASS)}});const EMAIL_REGEXP=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/,NAME_REGEXP=/[А-Яа-я]{2,10}/,CITY_REGEXP=/[А-Яа-я]{2,20}/,isEmailValid=e=>EMAIL_REGEXP.test(e),isNameValid=e=>NAME_REGEXP.test(e),isPhoneValid=e=>18===e.length,addError=e=>e.classList.add(ERROR_ClASS),isCityValid=e=>CITY_REGEXP.test(e),popUpForm_01=document.getElementById("popUp-form_01");popUpForm_01.addEventListener("submit",e=>{e.preventDefault();let o=document.getElementById("popup_name-01"),t=document.getElementById("popup_phone-01"),l=document.getElementById("popup_email-01");return isNameValid(o.value)?isPhoneValid(t.value)?isEmailValid(l.value)?void(axios.post("../../EmailControllers/PopUpForm_01.php",{"popup_name-01":o.value,"popup_phone-01":t.value,"popup_email-01":l.value}).then(e=>{e&&console.log(e)}).catch(e=>{e||alert("Извините, произошла ошибка, попробуйте позже")}),closeForm("fs1"),clearValues()):(addError(l),!1):(addError(t),!1):(addError(o),!1)});const popUpForm_02=document.getElementById("popUp-form_02");popUpForm_02.addEventListener("submit",e=>{e.preventDefault();let o=document.getElementById("popup_name-02"),t=document.getElementById("popup_phone-02"),l=document.getElementById("popup_email-02");return isNameValid(o.value)?isPhoneValid(t.value)?isEmailValid(l.value)?void(axios.post("../../EmailControllers/PopUpForm_02.php",{"popup_name-02":o.value,"popup_phone-02":t.value,"popup_email-02":l.value}).then(e=>{e&&console.log(e)}).catch(e=>{e||alert("Извините, произошла ошибка, попробуйте позже")}),closeForm("fs2"),clearValues()):(addError(l),!1):(addError(t),!1):(addError(o),!1)});const popUpForm_03=document.getElementById("popUp-form_03");popUpForm_03.addEventListener("submit",e=>{e.preventDefault();let o=document.getElementById("popup_name-03"),t=document.getElementById("popup_phone-03"),l=document.getElementById("popup_email-03");return isNameValid(o.value)?isPhoneValid(t.value)?isEmailValid(l.value)?void(axios.post("../../EmailControllers/PopUpForm_03.php",{"popup_name-03":o.value,"popup_phone-03":t.value,"popup_email-03":l.value}).then(e=>{e&&console.log(e)}).catch(e=>{e||alert("Извините, произошла ошибка, попробуйте позже")}),closeForm("fs3"),clearValues()):(addError(l),!1):(addError(t),!1):(addError(o),!1)});const popUpForm_04=document.getElementById("popUp-form_04");popUpForm_04.addEventListener("submit",e=>{e.preventDefault();let o=document.getElementById("popup_name-04"),t=document.getElementById("popup_phone-04"),l=document.getElementById("popup_email-04");return isNameValid(o.value)?isPhoneValid(t.value)?isEmailValid(l.value)?void(axios.post("../../EmailControllers/PopUpForm_04.php",{"popup_name-04":o.value,"popup_phone-04":t.value,"popup_email-04":l.value}).then(e=>{closeForm("fs4"),console.log(e)}).catch(e=>{e||alert("Извините, произошла ошибка, попробуйте позже")}),closeForm("fs4"),clearValues()):(addError(l),!1):(addError(t),!1):(addError(o),!1)});const footerForm=document.getElementById("footer-form");footerForm.addEventListener("submit",e=>{e.preventDefault();let o=document.getElementById("footer_name"),t=document.getElementById("footer_phone"),l=document.getElementById("footer_email"),r=document.getElementById("footer_city"),p=document.querySelector(".checkbox-wrapper"),n=document.getElementById("modern-checkbox");return isNameValid(o.value)?isPhoneValid(t.value)?isEmailValid(l.value)?isCityValid(r.value)?n.checked?void(axios.post("../../EmailControllers/FooterForm.php",{footer_name:o.value,footer_phone:t.value,footer_email:l.value,footer_city:r.value}).then(e=>{e&&console.log(e)}).catch(e=>{e||alert("Извините, произошла ошибка, попробуйте позже")}),document.querySelectorAll(".footer-inp").forEach(e=>{e.value=""}),p.classList.remove("error"),n.checked=!1):(p.classList.add("error"),!1):(console.log(r.value),addError(r),!1):(addError(l),!1):(addError(t),!1):(addError(o),!1)});const popUpButtons=Array.from(document.querySelectorAll(".popUp-button")),popUpWrapper=Array.from(document.querySelectorAll(".form-popup__wrapper")),closeSendFormButtons=Array.from(document.querySelectorAll(".popup-form__send__close")),body=document.body;function exit(e){let o=[...e.target.classList].includes("form-popup__wrapper")||"close-button"===e.target.className||27===e.keyCode;o&&(document.querySelectorAll(".form-popup__wrapper").forEach(e=>{e.classList.remove("visible")}),getInitialIndicators())}function bodyLock(){body.classList.add("lock")}function bodyUnLock(){body.classList.remove("lock")}function getInitialIndicators(){bodyUnLock(),document.querySelectorAll(".form-popup__wrapper").forEach(e=>{e.classList.remove("visible")}),document.querySelectorAll(".popup-form__send").forEach(e=>{e.classList.remove("visible")}),document.querySelectorAll(".popup-form").forEach(e=>{e.classList.remove("not-visible")})}document.addEventListener("keydown",exit),popUpButtons.forEach(e=>{e.addEventListener("click",o=>{o.preventDefault();let t=document.getElementById(e.dataset.form);t.classList.add("visible")})}),closeSendFormButtons.forEach(e=>{e.addEventListener("click",getInitialIndicators)}),popUpWrapper.forEach(e=>{e.addEventListener("click",exit)});